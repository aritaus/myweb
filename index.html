<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì•ˆì •ì ì¸ ë³´ì•ˆ í€´ì¦ˆ</title>
    <style>
        body { background-color: #333; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; font-family: 'Malgun Gothic', sans-serif; }
        .flash-stage { width: 450px; background: #fff; border: 5px solid #000; border-radius: 20px; text-align: center; overflow: hidden; box-shadow: 10px 10px 0px rgba(0,0,0,0.2); }
        .header-bar { background: #ffcc00; padding: 15px; font-weight: bold; border-bottom: 5px solid #000; font-size: 18px; }
        #question { margin: 40px 20px; font-size: 20px; color: #333; }
        .input-box { margin-bottom: 30px; }
        input { padding: 12px; border: 3px solid #000; border-radius: 10px; font-size: 18px; text-align: center; width: 60%; outline: none; }
        button { padding: 12px 20px; background: #00ccff; border: 3px solid #000; border-radius: 10px; cursor: pointer; font-weight: bold; margin-left: 5px; }
        button:hover { background: #fff200; }
        #feedback { margin-bottom: 20px; font-weight: bold; height: 24px; font-size: 18px; }
    </style>
</head>
<body>

<div class="flash-stage">
    <div class="header-bar">ë³´ì•ˆ í€´ì¦ˆ (Fixed Version)</div>
    <div class="content">
        <h2 id="question">ë¬¸ì œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</h2>
        <div class="input-area">
            <div class="input-box">
                <input type="text" id="answer-input" placeholder="ì •ë‹µ ì…ë ¥" autocomplete="off">
                <button id="submit-btn">í™•ì¸</button>
            </div>
        </div>
        <div id="feedback"></div>
    </div>
</div>

<script>
    // 1. ì •ë‹µ ë°ì´í„°ë¥¼ ë‹¨ìˆœ í…ìŠ¤íŠ¸ê°€ ì•„ë‹Œ 'ì¸ì½”ë”©ëœ ë¬¸ìì—´'ë¡œ ì €ì¥
    // ì •ë‹µ: 'ì„œìš¸', 'apple', 'ì´ìˆœì‹ '
    const questions = [
        { q: "ëŒ€í•œë¯¼êµ­ì˜ ìˆ˜ë„ëŠ”?", a: "7ISc7Jq4" }, 
        { q: "ì‚¬ê³¼ë¥¼ ì˜ì–´ë¡œ?", a: "YXBwbGU=" },
        { q: "ê±°ë¶ì„ ì„ ë§Œë“  ì¥êµ°ì€?", a: "7J207Iic7Iug" }
    ];

    let currentIndex = 0;

    const questionEl = document.getElementById('question');
    const inputEl = document.getElementById('answer-input');
    const btnEl = document.getElementById('submit-btn');
    const feedbackEl = document.getElementById('feedback');

    // 2. ì…ë ¥ê°’ì„ ì €ì¥ëœ ë°ì´í„°ì™€ ë¹„êµ ê°€ëŠ¥í•œ í˜•íƒœë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
    function encodeText(str) {
        // í•œê¸€ ê¹¨ì§ ë°©ì§€ë¥¼ ìœ„í•´ btoaì™€ encodeURIComponent ì¡°í•©
        return btoa(encodeURIComponent(str.trim().toLowerCase()).replace(/%([0-9A-F]{2})/g, function(match, p1) {
            return String.fromCharCode('0x' + p1);
        }));
    }

    // 3. ë¬¸ì œ ì¶œë ¥
    function loadQuestion() {
        if (currentIndex < questions.length) {
            questionEl.innerText = questions[currentIndex].q;
            inputEl.value = "";
            inputEl.focus();
            feedbackEl.innerText = "";
        } else {
            questionEl.innerText = "ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ì™„ë£Œ!";
            document.querySelector('.input-area').style.display = 'none';
            feedbackEl.innerText = "ëª¨ë“  ì •ë‹µì„ ë§í˜”ìŠµë‹ˆë‹¤.";
            feedbackEl.style.color = "blue";
        }
    }

    // 4. ì •ë‹µ í™•ì¸
    function checkAnswer() {
        const userInput = inputEl.value;
        if (!userInput) return;

        const userEncoded = encodeText(userInput);

        // ê°œë°œì ë„êµ¬ì—ì„œ ë´ë„ "7ISc7Jq4"ì™€ ì‚¬ìš©ìì˜ ì…ë ¥ê°’ë§Œ ë¹„êµí•˜ë¯€ë¡œ ì •ë‹µ ìœ ì¶”ê°€ ì–´ë ¤ì›€
        if (userEncoded === questions[currentIndex].a) {
            feedbackEl.innerText = "âœ… ì •ë‹µì…ë‹ˆë‹¤!";
            feedbackEl.style.color = "green";
            currentIndex++;
            setTimeout(loadQuestion, 800);
        } else {
            feedbackEl.innerText = "âŒ í‹€ë ¸ìŠµë‹ˆë‹¤!";
            feedbackEl.style.color = "red";
            inputEl.value = "";
            inputEl.focus();
        }
    }

    btnEl.addEventListener('click', checkAnswer);
    inputEl.addEventListener('keypress', (e) => { if (e.key === 'Enter') checkAnswer(); });

    // ì‹œì‘
    loadQuestion();
</script>

</body>
</html>